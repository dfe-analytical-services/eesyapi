<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>EES API workflow • eesyapi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="EES API workflow">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eesyapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/ees-api-workflow.html">EES API workflow</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>EES API workflow</h1>
            
      

      <div class="d-none name"><code>ees-api-workflow.Rmd</code></div>
    </div>

    
    
<p>The following article presents an example workflow of how, as an
analyst, someone might connect to the explore education statistics (EES)
API to collect data with the help of <code>eesyapi</code> in R.</p>
<p>As an overview, the stages you will likely need to follow are:</p>
<ul>
<li>Find the data set ID</li>
<li>Query the data set meta data to identify filter and indicator
IDs</li>
<li>Design a query using the relevant IDs</li>
<li>Post the query to the API</li>
<li>Perform some post processing of the data</li>
</ul>
<div class="section level2">
<h2 id="finding-a-data-set-id">Finding a data set ID<a class="anchor" aria-label="anchor" href="#finding-a-data-set-id"></a>
</h2>
<p>Only some data sets on EES are available via the EES API. This is to
maintain minimum standards around the API data catalogue.</p>
<p>Assuming you know the data set within a publication that you would
like to query, you will first need to identify the data set ID code.
There are two methods to do this, either a) via the data set’s page on
the EES website or b) by querying the API itself.</p>
<div class="section level3">
<h3 id="identifying-a-data-set-id-via-the-api">Identifying a data set ID via the API<a class="anchor" aria-label="anchor" href="#identifying-a-data-set-id-via-the-api"></a>
</h3>
<p>Finding a data set ID via the API is a two step process. First,
you’ll need to find the parent publication ID and second, you’ll need to
search the data catalogue within that publication for the data set.</p>
<p>Querying the publication list:</p>
<pre><code><span><span class="fu">eesyapi</span><span class="fu">::</span><span class="fu"><a href="../reference/get_publications.html">get_publications</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>This returns a list of all publications by ID and title (along with
slug, summary and date last published). From this list, you can find the
title of the publication that you’re interested in and pick out the
associated publication ID.</p>
<p>For example from the test list, we can pick out <strong>“Attendance
API data”</strong>, which has an ID of
<strong>“b6d9ed96-be68-4791-abc3-08dcaba68c04”</strong>. We can now use
this in the function <code><a href="../reference/get_data_catalogue.html">eesyapi::get_data_catalogue()</a></code> to find
all the data sets within that publication:</p>
<pre><code><span><span class="fu">eesyapi</span><span class="fu">::</span><span class="fu"><a href="../reference/get_data_catalogue.html">get_data_catalogue</a></span><span class="op">(</span><span class="st">"b6d9ed96-be68-4791-abc3-08dcaba68c04"</span><span class="op">)</span></span></code></pre>
<p>This returns a data frame containing data set IDs and titles (along
with a summary, the status and information on what’s in the latest
version). The data set IDs can be used as shown in the following
sections to get a given data set’s summary and meta data, and to query
the data set itself.</p>
</div>
<div class="section level3">
<h3 id="finding-a-data-set-id-on-the-ees-website">Finding a data set ID on the EES website<a class="anchor" aria-label="anchor" href="#finding-a-data-set-id-on-the-ees-website"></a>
</h3>
<p>As with any other data set, you can find an API data set in the EES
data catalogue. If you know the name, you can filter the catalogue on
this as normal. Not all data sets are accessible via the API, so to
filter down to just those that are, click the <strong>“API data sets
only”</strong> option as shown in the image below.</p>
<div class="float">
<img src="ees-data-catalogue-find-api-data-set.png" alt="Finding an API data set in the EES data catalogue"><div class="figcaption">Finding an API data set in the EES data
catalogue</div>
</div>
<p>Once you’ve found the data set you need, then click on the title of
the data set to be taken to it’s details page in the catalogue. On this
page (pictured below), you’ll find the <strong>API data set quick
start</strong> section, which gives the API data set name, <strong>API
data set ID</strong> and API data set version. This <strong>API data set
ID</strong> is what’s needed below to query the data set and its meta
data.</p>
<div class="float">
<img src="ees-data-catalogue-details-api-data-set.png" alt="An example of an API data set’s details"><div class="figcaption">An example of an API data set’s details</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="getting-the-data-set-meta-data">Getting the data set meta data<a class="anchor" aria-label="anchor" href="#getting-the-data-set-meta-data"></a>
</h2>
<p>When querying a data set via the API, indicator and filter items are
referenced using auto-generated ID codes (known as SQIDs). Therefore, in
order to construct a query that involves selecting a subset of filter
items or indicators, you’ll need to obtain the codes associated with
those elements.</p>
<p>All those filter item and indicator codes are stored in a data set’s
meta data, which can also be queried via the API. To get those codes as
well as details on what time periods and geographic levels and locations
are available in a given data set, you can use the function
<code><a href="../reference/get_meta.html">eesyapi::get_meta()</a></code>, providing it with your data set’s ID
(which you can obtain either using
<code><a href="../reference/get_data_catalogue.html">eesyapi::get_data_catalogue()</a></code> or via the EES data
catalogue). For example, to get the “attendance in schools” data from
the example attendance API data publication, you can take the data set
ID <code>7c0e9201-c7c0-ff73-bee4-304e731ec0e6</code> and provide it as a
parameter to <code>get_meta</code>:</p>
<pre><code><span><span class="fu">eesyapi</span><span class="fu">::</span><span class="fu"><a href="../reference/get_meta.html">get_meta</a></span><span class="op">(</span>dataset_id <span class="op">=</span> <span class="st">"7c0e9201-c7c0-ff73-bee4-304e731ec0e6"</span><span class="op">)</span></span></code></pre>
<p>This function returns a list of 5 data frames:</p>
<ul>
<li>
<code>$time_periods</code>: label, code and period of all available
time periods in the data set</li>
<li>
<code>$locations</code>: geographic_level, code, label and item_id
of all available locations in the data set</li>
<li>
<code>$filter_columns</code>: col_name and label of all filters in
the data set</li>
<li>
<code>$filter_items</code>: col_name, item_label, item_id and
default_item for all filter items in the data set</li>
<li>
<code>$indicators</code>: col_name and label of all indicators in
the data set</li>
</ul>
<p>The item_id values provided in <code>$locations</code> and
<code>$filter_items</code> are required to construct queries for
filtering a given data set, whilst time periods can be filtered on the
values in the <code>$time_period</code> code column.</p>
<p>In this example, let’s say we’ve run
<code>eesyapi::get_meta("7c0e9201-c7c0-ff73-bee4-304e731ec0e6")</code>
and we want to filter our data set to obtain data for:</p>
<ul>
<li>the “Week 26” time period in “2024”,</li>
<li>“York” and “England” from the geographies,</li>
<li>“Absence” from Attendance status</li>
<li>“Approved educational activity”, “Authorised” and “Unauthorised”
from Attendance type</li>
<li>Just the “Total” entries for “reason” and “day_number”</li>
<li>And we want to see “Number of sessions” data values.</li>
</ul>
<p>For this we would need the following codes / item_ids:</p>
<ul>
<li>“2024 W26”</li>
<li>“jfhAM” and “dP0Zw”</li>
<li>“7SdXo”</li>
<li>“6AXrf”, “0k3T5” and “YdkHK”</li>
<li>“uLQo4” and “bBrtT”</li>
<li>“bqZtT”</li>
</ul>
<p>Note that whilst the above IDs are unique within a given item type
(e.g. <code>filter_item</code>), they are not necessarily unique between
types. For example, a given <code>indicator</code> could be assigned the
same ID as a <code>filter_item</code> in a given data set.</p>
<p>As a quick example of how you might quickly query the meta data for
these codes, you could try the following example pieces of query
code.</p>
<div class="section level3">
<h3 id="time-periods">Time periods<a class="anchor" aria-label="anchor" href="#time-periods"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">eesyapi</span><span class="fu">::</span><span class="fu"><a href="../reference/get_meta.html">get_meta</a></span><span class="op">(</span>dataset_id <span class="op">=</span> <span class="st">"7c0e9201-c7c0-ff73-bee4-304e731ec0e6"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">magrittr</span><span class="fu">::</span><span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">extract2</a></span><span class="op">(</span><span class="st">"time_periods"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">label</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2024 Week 26"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt;   code period        label</span></span>
<span><span class="co">#&gt; 1  W26   2024 2024 Week 26</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="geographies">Geographies<a class="anchor" aria-label="anchor" href="#geographies"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">eesyapi</span><span class="fu">::</span><span class="fu"><a href="../reference/get_meta.html">get_meta</a></span><span class="op">(</span>dataset_id <span class="op">=</span> <span class="st">"7c0e9201-c7c0-ff73-bee4-304e731ec0e6"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">magrittr</span><span class="fu">::</span><span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">extract2</a></span><span class="op">(</span><span class="st">"locations"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">label</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"York"</span>, <span class="st">"England"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   item_id   label      code oldCode geographic_level_code geographic_level</span></span>
<span><span class="co">#&gt; 1   jfhAM    York E06000014     816                    LA  Local authority</span></span>
<span><span class="co">#&gt; 2   dP0Zw England E92000001    &lt;NA&gt;                   NAT         National</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="filter-items">Filter items<a class="anchor" aria-label="anchor" href="#filter-items"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">eesyapi</span><span class="fu">::</span><span class="fu"><a href="../reference/get_meta.html">get_meta</a></span><span class="op">(</span>dataset_id <span class="op">=</span> <span class="st">"7c0e9201-c7c0-ff73-bee4-304e731ec0e6"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">magrittr</span><span class="fu">::</span><span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">extract2</a></span><span class="op">(</span><span class="st">"filter_items"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">item_label</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Absence"</span>, <span class="st">"Approved educational activity"</span>, <span class="st">"Authorised"</span>, <span class="st">"Unauthorised"</span>, <span class="st">"Total"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt;   col_id                    item_label item_id default_item</span></span>
<span><span class="co">#&gt; 1  Db3Qe                       Absence   7SdXo           NA</span></span>
<span><span class="co">#&gt; 2  emJuS Approved educational activity   6AXrf           NA</span></span>
<span><span class="co">#&gt; 3  emJuS                    Authorised   0k3T5           NA</span></span>
<span><span class="co">#&gt; 4  emJuS                  Unauthorised   YdkHK           NA</span></span>
<span><span class="co">#&gt; 5  5TYdi                         Total   uLQo4         TRUE</span></span>
<span><span class="co">#&gt; 6  4kdUZ                         Total   5UNdi         TRUE</span></span>
<span><span class="co">#&gt; 7  mU59K                         Total   bBrtT         TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="indicators">Indicators<a class="anchor" aria-label="anchor" href="#indicators"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">eesyapi</span><span class="fu">::</span><span class="fu"><a href="../reference/get_meta.html">get_meta</a></span><span class="op">(</span>dataset_id <span class="op">=</span> <span class="st">"7c0e9201-c7c0-ff73-bee4-304e731ec0e6"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">magrittr</span><span class="fu">::</span><span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">extract2</a></span><span class="op">(</span><span class="st">"indicators"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">label</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Session count"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt;   col_id      col_name         label</span></span>
<span><span class="co">#&gt; 1  bqZtT session_count Session count</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="retrieving-data-from-a-data-set">Retrieving data from a data set<a class="anchor" aria-label="anchor" href="#retrieving-data-from-a-data-set"></a>
</h2>
<div class="section level3">
<h3 id="downloading-an-entire-data-set-in-a-single-file">Downloading an entire data set in a single file<a class="anchor" aria-label="anchor" href="#downloading-an-entire-data-set-in-a-single-file"></a>
</h3>
<p>Whilst specific queries (as detailed in the following sections) are
best used for automated pipeline workflows, the EES API also offers the
option to just download the entirety of the underlying data file for a
given data set. This bypasses the use of IDs, making it a simpler
short-term option to retrieve data, but with the risk of creating
breaking changes in automated pipelines should element labels
change.</p>
<p>Using <code>eesyapi</code>, you can retrieve a data set using
<code><a href="../reference/download_dataset.html">download_dataset()</a></code> and providing the data set ID as
follows:</p>
<pre><code><span><span class="fu"><a href="../reference/download_dataset.html">download_dataset</a></span><span class="op">(</span><span class="st">"7c0e9201-c7c0-ff73-bee4-304e731ec0e6"</span><span class="op">)</span></span></code></pre>
<p>This will return a data frame containing the data in the form that
DfE analysts uploaded it to EES in.</p>
</div>
<div class="section level3">
<h3 id="using-query_dataset">Using <code>query_dataset()</code><a class="anchor" aria-label="anchor" href="#using-query_dataset"></a>
</h3>
<p>The recommended go-to option for retrieving data is the
<code><a href="../reference/query_dataset.html">query_dataset()</a></code> function. This provides options for
attaching a pre-made JSON file to a query, attaching a pre-made JSON
string or passing a set of IDs as parameters to create a query for
you.</p>
<div class="section level4">
<h4 id="querying-a-data-set-using-parameters">Querying a data set using parameters<a class="anchor" aria-label="anchor" href="#querying-a-data-set-using-parameters"></a>
</h4>
<p><code><a href="../reference/query_dataset.html">query_dataset()</a></code> can be given a set of parameters to
build up a query for you. Behind the scenes it creates a JSON string
based on the parameters provided to it by the user. This inherently
limits the extent of the type of queries that you can perform, but it
should cover most basic use cases.</p>
<p>The parameters that you’ll can provide to build up your query are: -
<code>time_periods</code> - <code>locations</code> -
<code>filter_items</code> - <code>indicators</code> (required)</p>
<p>All these are optional, except for <code>indicators</code> which you
must always specify. If you don’t provide any of
<code>time_periods</code>, <code>locations</code> or
<code>filter_items</code>, then you’ll receive all rows from the data
set (although be careful, this may take some time for larger data
sets).</p>
<p>Using the parameters we obtained from <code>get-meta</code> above,
then we can create a query to return session count data for only
<strong>Approved educational activity</strong>,
<strong>Authorised</strong> and <strong>Unauthorised</strong> in the
<strong>Absences</strong> category, <strong>Nationally</strong> for
<strong>York</strong> in <strong>Week 26</strong> in
<strong>2024</strong>, we would supply the following:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">eesyapi</span><span class="fu">::</span><span class="fu"><a href="../reference/query_dataset.html">query_dataset</a></span><span class="op">(</span></span>
<span>  dataset_id <span class="op">=</span> <span class="st">"7c0e9201-c7c0-ff73-bee4-304e731ec0e6"</span>,</span>
<span>  indicators <span class="op">=</span> <span class="st">"bqZtT"</span>,</span>
<span>  filter_items <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    attendance_status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"7SdXo"</span><span class="op">)</span>,</span>
<span>    attendance_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"6AXrf"</span>, <span class="st">"0k3T5"</span>, <span class="st">"YdkHK"</span><span class="op">)</span>,</span>
<span>    day_number <span class="op">=</span> <span class="st">"uLQo4"</span>,</span>
<span>    reason <span class="op">=</span> <span class="st">"bBrtT"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  geographies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NAT|id|dP0Zw"</span>, <span class="st">"LA|ID|jfhAM"</span><span class="op">)</span>,</span>
<span>  time_periods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2024|W26"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;    code period geographic_level la_name   la_code la_oldCode nat_name  nat_code</span></span>
<span><span class="co">#&gt; 1   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 2   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 3   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 4   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 5   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 6   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 7   W26   2024              NAT    &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;  England E92000001</span></span>
<span><span class="co">#&gt; 8   W26   2024              NAT    &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;  England E92000001</span></span>
<span><span class="co">#&gt; 9   W26   2024              NAT    &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;  England E92000001</span></span>
<span><span class="co">#&gt; 10  W26   2024              NAT    &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;  England E92000001</span></span>
<span><span class="co">#&gt; 11  W26   2024              NAT    &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;  England E92000001</span></span>
<span><span class="co">#&gt; 12  W26   2024              NAT    &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;  England E92000001</span></span>
<span><span class="co">#&gt; 13  W26   2024              NAT    &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;  England E92000001</span></span>
<span><span class="co">#&gt; 14  W26   2024              NAT    &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;  England E92000001</span></span>
<span><span class="co">#&gt;                    reg_name  reg_code attendance_status attendance_type</span></span>
<span><span class="co">#&gt; 1  Yorkshire and The Humber E12000003           Absence      Authorised</span></span>
<span><span class="co">#&gt; 2  Yorkshire and The Humber E12000003           Absence    Unauthorised</span></span>
<span><span class="co">#&gt; 3  Yorkshire and The Humber E12000003           Absence      Authorised</span></span>
<span><span class="co">#&gt; 4  Yorkshire and The Humber E12000003           Absence    Unauthorised</span></span>
<span><span class="co">#&gt; 5  Yorkshire and The Humber E12000003           Absence      Authorised</span></span>
<span><span class="co">#&gt; 6  Yorkshire and The Humber E12000003           Absence    Unauthorised</span></span>
<span><span class="co">#&gt; 7                      &lt;NA&gt;      &lt;NA&gt;           Absence      Authorised</span></span>
<span><span class="co">#&gt; 8                      &lt;NA&gt;      &lt;NA&gt;           Absence    Unauthorised</span></span>
<span><span class="co">#&gt; 9                      &lt;NA&gt;      &lt;NA&gt;           Absence      Authorised</span></span>
<span><span class="co">#&gt; 10                     &lt;NA&gt;      &lt;NA&gt;           Absence    Unauthorised</span></span>
<span><span class="co">#&gt; 11                     &lt;NA&gt;      &lt;NA&gt;           Absence      Authorised</span></span>
<span><span class="co">#&gt; 12                     &lt;NA&gt;      &lt;NA&gt;           Absence    Unauthorised</span></span>
<span><span class="co">#&gt; 13                     &lt;NA&gt;      &lt;NA&gt;           Absence      Authorised</span></span>
<span><span class="co">#&gt; 14                     &lt;NA&gt;      &lt;NA&gt;           Absence    Unauthorised</span></span>
<span><span class="co">#&gt;    day_number establishment_phase reason session_count</span></span>
<span><span class="co">#&gt; 1       Total             Special  Total           199</span></span>
<span><span class="co">#&gt; 2       Total             Special  Total            83</span></span>
<span><span class="co">#&gt; 3       Total           Secondary  Total          4084</span></span>
<span><span class="co">#&gt; 4       Total           Secondary  Total          3338</span></span>
<span><span class="co">#&gt; 5       Total             Primary  Total          4103</span></span>
<span><span class="co">#&gt; 6       Total             Primary  Total          2500</span></span>
<span><span class="co">#&gt; 7       Total             Primary  Total       1265134</span></span>
<span><span class="co">#&gt; 8       Total             Primary  Total        751444</span></span>
<span><span class="co">#&gt; 9       Total             Special  Total         95181</span></span>
<span><span class="co">#&gt; 10      Total             Special  Total         38411</span></span>
<span><span class="co">#&gt; 11      Total           Secondary  Total       1110696</span></span>
<span><span class="co">#&gt; 12      Total           Secondary  Total        915161</span></span>
<span><span class="co">#&gt; 13      Total               Total  Total       2471011</span></span>
<span><span class="co">#&gt; 14      Total               Total  Total       1705016</span></span></code></pre></div>
<p>Some notes on the above:</p>
<ul>
<li>
<code>indicators</code>, <code>time_periods</code>,
<code>geographies</code> and <code>filter_items</code> can all be
supplied as vectors - <code>c(...)</code> - and will be interpreted as
<code>filter(... %in% c(...))</code>.</li>
<li>
<code>filter_items</code> can be supplied as a list to create more
stringent cross-filter combinations, i.e.  in the above example rows
will only be returned for the specific combinations given across the 4
filters.</li>
<li>
<code>geographies</code> can be supplied as a data frame to allow
for more complex queries such as “give me all LAs in a given region”.
The structure for this can be seen by calling
<code><a href="../reference/example_geography_query.html">example_geography_query()</a></code>.</li>
</ul>
</div>
<div class="section level4">
<h4 id="querying-a-data-set-using-a-json-file-or-string">Querying a data set using a JSON file or string<a class="anchor" aria-label="anchor" href="#querying-a-data-set-using-a-json-file-or-string"></a>
</h4>
<p>If you’re familiar with using JSON and wish to just write your own
query from scratch, then you can use <code><a href="../reference/query_dataset.html">query_dataset()</a></code> with
the <code>json_query</code> parameter as follows:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">json_query</span> <span class="op">&lt;-</span> <span class="st">"{</span></span>
<span><span class="st">  \"criteria\": {</span></span>
<span><span class="st">    \"and\": [</span></span>
<span><span class="st">      {</span></span>
<span><span class="st">        \"filters\": {</span></span>
<span><span class="st">          \"eq\": \"7SdXo\"</span></span>
<span><span class="st">        }</span></span>
<span><span class="st">      },</span></span>
<span><span class="st">      {</span></span>
<span><span class="st">        \"locations\": {</span></span>
<span><span class="st">          \"eq\": {</span></span>
<span><span class="st">            \"level\": \"LA\",</span></span>
<span><span class="st">            \"id\": \"jfhAM\"</span></span>
<span><span class="st">          }</span></span>
<span><span class="st">        }</span></span>
<span><span class="st">      }</span></span>
<span><span class="st">    ]</span></span>
<span><span class="st">  },</span></span>
<span><span class="st">  \"indicators\": [</span></span>
<span><span class="st">    \"bqZtT\"</span></span>
<span><span class="st">  ],</span></span>
<span><span class="st">  \"debug\": false,</span></span>
<span><span class="st">  \"page\": 1,</span></span>
<span><span class="st">  \"pageSize\": 10</span></span>
<span><span class="st">}"</span></span>
<span><span class="fu">eesyapi</span><span class="fu">::</span><span class="fu"><a href="../reference/query_dataset.html">query_dataset</a></span><span class="op">(</span></span>
<span>  dataset_id <span class="op">=</span> <span class="st">"7c0e9201-c7c0-ff73-bee4-304e731ec0e6"</span>,</span>
<span>  json_query <span class="op">=</span> <span class="va">json_query</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;    code period geographic_level la_name   la_code la_oldCode nat_name  nat_code</span></span>
<span><span class="co">#&gt; 1   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 2   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 3   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 4   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 5   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 6   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 7   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 8   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 9   W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt; 10  W26   2024               LA    York E06000014        816  England E92000001</span></span>
<span><span class="co">#&gt;                    reg_name  reg_code attendance_status attendance_type</span></span>
<span><span class="co">#&gt; 1  Yorkshire and The Humber E12000003           Absence  Not determined</span></span>
<span><span class="co">#&gt; 2  Yorkshire and The Humber E12000003           Absence      Authorised</span></span>
<span><span class="co">#&gt; 3  Yorkshire and The Humber E12000003           Absence    Unauthorised</span></span>
<span><span class="co">#&gt; 4  Yorkshire and The Humber E12000003           Absence      Authorised</span></span>
<span><span class="co">#&gt; 5  Yorkshire and The Humber E12000003           Absence      Authorised</span></span>
<span><span class="co">#&gt; 6  Yorkshire and The Humber E12000003           Absence      Authorised</span></span>
<span><span class="co">#&gt; 7  Yorkshire and The Humber E12000003           Absence      Authorised</span></span>
<span><span class="co">#&gt; 8  Yorkshire and The Humber E12000003           Absence      Authorised</span></span>
<span><span class="co">#&gt; 9  Yorkshire and The Humber E12000003           Absence      Authorised</span></span>
<span><span class="co">#&gt; 10 Yorkshire and The Humber E12000003           Absence      Authorised</span></span>
<span><span class="co">#&gt;    day_number establishment_phase                            reason</span></span>
<span><span class="co">#&gt; 1           1             Special                             Total</span></span>
<span><span class="co">#&gt; 2           1             Special                             Total</span></span>
<span><span class="co">#&gt; 3           1             Special                             Total</span></span>
<span><span class="co">#&gt; 4           1             Special              I authorised illness</span></span>
<span><span class="co">#&gt; 5           1             Special       M authorised medical dental</span></span>
<span><span class="co">#&gt; 6           1             Special R authorised religious observance</span></span>
<span><span class="co">#&gt; 7           1             Special          S authorised study leave</span></span>
<span><span class="co">#&gt; 8           1             Special          T authorised grt absence</span></span>
<span><span class="co">#&gt; 9           1             Special              H authorised holiday</span></span>
<span><span class="co">#&gt; 10          1             Special             E authorised excluded</span></span>
<span><span class="co">#&gt;    session_count</span></span>
<span><span class="co">#&gt; 1             63</span></span>
<span><span class="co">#&gt; 2             44</span></span>
<span><span class="co">#&gt; 3             19</span></span>
<span><span class="co">#&gt; 4             30</span></span>
<span><span class="co">#&gt; 5              4</span></span>
<span><span class="co">#&gt; 6              0</span></span>
<span><span class="co">#&gt; 7              0</span></span>
<span><span class="co">#&gt; 8              0</span></span>
<span><span class="co">#&gt; 9              8</span></span>
<span><span class="co">#&gt; 10             0</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="faqs">FAQs<a class="anchor" aria-label="anchor" href="#faqs"></a>
</h2>
<div class="section level3">
<h3 id="why-do-you-use-ids-rather-than-the-actual-labels-used-in-the-data">Why do you use IDs rather than the actual labels used in the
data?<a class="anchor" aria-label="anchor" href="#why-do-you-use-ids-rather-than-the-actual-labels-used-in-the-data"></a>
</h3>
<p>The IDs are intended to aid in future proofing for users that may
develop automated pipelines that connect to the EES API. Labeling
inevitably changes, for example if a “Total” entry is renamed to “All
pupils” or “All schools” to add clarity. If the underlying content of
that item stays the same, then automated pipelines will be required to
still connect to the same item, therefore each item has an associated ID
that will remain unchanged in a given data set as it is updated with new
data over the subsequent releases, even if a renaming of a field
occurs.</p>
</div>
<div class="section level3">
<h3 id="are-there-any-bandwidth-repeat-connection-constraints-that-i-should-know-about">Are there any bandwidth / repeat connection constraints that I
should know about?<a class="anchor" aria-label="anchor" href="#are-there-any-bandwidth-repeat-connection-constraints-that-i-should-know-about"></a>
</h3>
<p>There are currently no constraints whilst the system is being
tested.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich Bielby, Cam Race.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
